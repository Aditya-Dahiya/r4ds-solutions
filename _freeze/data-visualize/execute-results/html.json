{
  "hash": "d94e94fbdddd2d7cb19ad2f91060bd8e",
  "result": {
    "markdown": "# Data visualization {#sec-data-visualization}\n\n\n\n\n\n## Prerequisites {.unnumbered}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n#> ── Attaching core tidyverse packages ───────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\nlibrary(palmerpenguins)\n```\n:::\n\n\n## 2.2.5 Exercises {.unnumbered}\n\n1.  There are 344 rows and 8 columns in the `penguins` data frame.\n\n2.  The `bill_depth_mm` denotes the bill depth in millimeters.\n\n3.  There is a positive, linear, and somewhat strong association between bill depth and bill length of penguins.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins, \n  aes(x = bill_depth_mm, y = bill_length_mm)\n) + \n  geom_point()\n#> Warning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-3-1.png){width=576}\n:::\n:::\n\n\n4.  Species is a categorical variable and a scatterplot of a categorical variable is not that useful as it's difficult to use it to describe the distribution of bill depth across species.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins, \n  aes(x = bill_depth_mm, y = species)\n) + \n  geom_point()\n#> Warning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-4-1.png){width=576}\n:::\n:::\n\n\n5.  No aesthetic mappings for `x` and `y` are provided and these are required aesthetics for the point geom.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = penguins) + \n  geom_point()\n#> Error in `geom_point()`:\n#> ! Problem while setting up geom.\n#> ℹ Error occurred in the 1st layer.\n#> Caused by error in `compute_geom_1()`:\n#> ! `geom_point()` requires the following missing aesthetics: x and y\n```\n:::\n\n\n6.  Setting the `na.rm` argument to `TRUE` removes the missing values without a warning. The value for this argument is `FALSE` by default.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins, \n  aes(x = bill_depth_mm, y = bill_length_mm)\n) + \n  geom_point(na.rm = TRUE)\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-6-1.png){width=576}\n:::\n:::\n\n\n7.  The plot from the previous exercise with caption added is provided below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins,\n  aes(x = bill_depth_mm, y = bill_length_mm)\n) +\n  geom_point(na.rm = TRUE) +\n  labs(caption = \"Data come from the palmerpenguins package.\")\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-7-1.png){width=576}\n:::\n:::\n\n\n8.  The code for recreating the visualization is provided below. The `bill_depth_mm` variable should be mapped at the local level, only for the point geom, as it is not used for the smooth geom -- the points are colored for bill depth but the smooth line is a single color.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins,\n  aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point(aes(color = bill_depth_mm)) + \n  geom_smooth()\n#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#> Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#> Warning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-8-1.png){width=576}\n:::\n:::\n\n\n9.  I would expect the a scatterplot of body mass vs. flipper length with points and smooth lines for each species in a different color. The plot below indeed shows this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g, color = island)\n) +\n  geom_point() +\n  geom_smooth(se = FALSE)\n#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#> Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#> Warning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-9-1.png){width=576}\n:::\n:::\n\n\n10. The two plots will look the same as in the first plot the aesthetic mappings are at the global level and passed down to both geoms, and in the second plot both geoms have the same aesthetic mappings, each defined at the local level.\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point() +\n  geom_smooth()\n#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#> Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#> Warning: Removed 2 rows containing missing values (`geom_point()`).\n\nggplot() +\n  geom_point(\n    data = penguins,\n    mapping = aes(x = flipper_length_mm, y = body_mass_g)\n  ) +\n  geom_smooth(\n    data = penguins,\n    mapping = aes(x = flipper_length_mm, y = body_mass_g)\n  )\n#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#> Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#> Removed 2 rows containing missing values (`geom_point()`).\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-10-1.png){width=576}\n:::\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-10-2.png){width=576}\n:::\n:::\n\n\n## 2.4.3 Exercises {.unnumbered}\n\n1.  This code makes the bars horizontal instead of vertical.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(y = species)) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-11-1.png){width=576}\n:::\n:::\n\n\n2.  In the first plot, the borders of the bars are colored. In the second plot, the bars are filled in with colors. The fill aesthetic is more useful for changing the color of the bars.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species)) +\n  geom_bar(color = \"red\")\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-12-1.png){width=576}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species)) +\n  geom_bar(fill = \"red\")\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-13-1.png){width=576}\n:::\n:::\n\n\n3.  It determines the number of bins.\n\n4.  \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(diamonds, aes(x = carat)) +\n  geom_histogram(binwidth = 0.10)\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-14-1.png){width=576}\n:::\n:::\n\n\nI think .10 binwidth shows the most results.\n\n## 2.5.5 Exercises {.unnumbered}\n\n1.  `manufacturer`, `class`, `fl`, `drv`, `model`, and `trans` are all categorical variables. `displ`, `year`, `cyl`, `cty`, and `hwy` are all numerical variables. You can run `glimpse(mpg)` or `?mpg` to see a list of the variables.\n2.  The difference is a numerical variable doesn't work with shape aesthetic but a categorical variable does. Also, the color scale is different for numerical and categorical variables.\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, color = cty)\n) + \n  geom_point()\n\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, size = cty)\n) + \n  geom_point()\n\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, size = cty, color = cty)\n) + \n  geom_point()\n\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, size = cty, color = cty, shape = drv)\n) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-15-1.png){width=576}\n:::\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-15-2.png){width=576}\n:::\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-15-3.png){width=576}\n:::\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-15-4.png){width=576}\n:::\n:::\n\n\n3.  Since there is no line to alter the width of, nothing happens. The code runs as though that aesthetic was not specified.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = hwy, y = displ, linewidth = cty)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-16-1.png){width=576}\n:::\n:::\n\n\n4.  See below for a sample plot that maps `hwy` to `x`, `y`y, and `color` aesthetics. ggplot2 will allow you to map the same variable to multiple aesthetics, but the resulting plot is not useful.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = hwy, y = hwy, color = hwy)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-17-1.png){width=576}\n:::\n:::\n\n\n5.  Adelies tend to have higher bill depth while Gentoo have longer bills and Chinstrap have deeper and longer bills.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  penguins,\n  aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n) + \n  geom_point()\n#> Warning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-18-1.png){width=576}\n:::\n:::\n\n\n6.  The code provided in the exercise yields two separate legends because the legend for `color` is renamed to `\"Species\"` but the legend for shape is not, and is named `\"species\"` by default instead. To fix it, we would need to explicitly rename the shape legend as well.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = penguins,\n  mapping = aes(\n    x = bill_length_mm, y = bill_depth_mm, \n    color = species, shape = species\n  )\n) +\n  geom_point() +\nlabs(\n  color = \"Species\",\n  shape = \"Species\"\n)\n#> Warning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-19-1.png){width=576}\n:::\n:::\n\n\n## 2.6.1 Exercises {.unnumbered}\n\n1.  The second plot is saved, because `ggsave()` saves the last plot you made.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = class)) +\n  geom_bar()\n\nggplot(mpg, aes(x = cty, y = hwy)) +\n  geom_point()\n\nggsave(\"mpg-plot.png\")\n#> Saving 6 x 4 in image\n```\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-20-1.png){width=576}\n:::\n\n::: {.cell-output-display}\n![](data-visualize_files/figure-html/unnamed-chunk-20-2.png){width=576}\n:::\n:::\n\n\n\n\n2.  You just have to change the suffix of the file from png to pdf in the `ggsave()` call.\n",
    "supporting": [
      "data-visualize_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}