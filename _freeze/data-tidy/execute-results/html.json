{
  "hash": "d1d279d29036a8336dc910fe1934ace3",
  "result": {
    "markdown": "---\ntitle: \"Data tidying\"\n---\n\n\n\n\n## Prerequisites {.unnumbered}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n#> ── Attaching core tidyverse packages ───────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n\n## 6.2.1 Exercises {.unnumbered}\n\n1.  In each of `table1`, `table2`, and `table3`, each observation represents a country.\n    In `table1`, `country` is the country name, `year` is the year of data collection, `cases` is the number of people with the disease in that year, and `population` is the number of people in each country in that year.\n    In `table2`, `country` and `year` are the same as in `table1`, `type` is the type of number, and `count` is the number of observations (either `cases` or `population` depending on `type`).\n    Finally, in `table3`, `country` and `year` are again the same as in `table1`, and `rate` is the rate of disease (cases divided by population).\n\n2.  For `table2`, we need to reshape the data have a column for cases and a column for population and then divide the two to calculate the rate.\n    A possible approach is shown below.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    table2 |>\n      pivot_wider(\n        names_from = type,\n        values_from = count\n      ) |> \n      mutate(rate = cases / population * 10000)\n    #> # A tibble: 6 × 5\n    #>   country      year  cases population  rate\n    #>   <chr>       <dbl>  <dbl>      <dbl> <dbl>\n    #> 1 Afghanistan  1999    745   19987071 0.373\n    #> 2 Afghanistan  2000   2666   20595360 1.29 \n    #> 3 Brazil       1999  37737  172006362 2.19 \n    #> 4 Brazil       2000  80488  174504898 4.61 \n    #> 5 China        1999 212258 1272915272 1.67 \n    #> 6 China        2000 213766 1280428583 1.67\n    ```\n    :::\n\n\n    For `table3`, we need to separate cases and population into their own columns and then divide them.\n    A possible approach is shown below.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    table3 |>\n      separate_wider_delim(\n        cols = rate, \n        delim = \"/\", \n        names = c(\"cases\", \"population\"),\n      ) |>\n      mutate(\n        cases = as.numeric(cases),\n        population = as.numeric(population),\n        rate = cases / population * 10000\n      )\n    #> # A tibble: 6 × 5\n    #>   country      year  cases population  rate\n    #>   <chr>       <dbl>  <dbl>      <dbl> <dbl>\n    #> 1 Afghanistan  1999    745   19987071 0.373\n    #> 2 Afghanistan  2000   2666   20595360 1.29 \n    #> 3 Brazil       1999  37737  172006362 2.19 \n    #> 4 Brazil       2000  80488  174504898 4.61 \n    #> 5 China        1999 212258 1272915272 1.67 \n    #> 6 China        2000 213766 1280428583 1.67\n    ```\n    :::\n",
    "supporting": [
      "data-tidy_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}