[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R for Data Science (2e) - Solutions to Exercises",
    "section": "",
    "text": "Welcome\nThis is the website for the work-in-progress Solutions to Exercises for the 2nd edition of “R for Data Science”."
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "There are no exercises in this chapter."
  },
  {
    "objectID": "data-visualize.html#prerequisites",
    "href": "data-visualize.html#prerequisites",
    "title": "2  Data visualization",
    "section": "Prerequisites",
    "text": "Prerequisites\n\nlibrary(tidyverse)\n#&gt; ── Attaching core tidyverse packages ───────────────────── tidyverse 2.0.0 ──\n#&gt; ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#&gt; ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#&gt; ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#&gt; ✔ purrr     1.0.1     \n#&gt; ── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──\n#&gt; ✖ dplyr::filter() masks stats::filter()\n#&gt; ✖ dplyr::lag()    masks stats::lag()\n#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\nlibrary(palmerpenguins)"
  },
  {
    "objectID": "data-visualize.html#exercises",
    "href": "data-visualize.html#exercises",
    "title": "2  Data visualization",
    "section": "2.2.5 Exercises",
    "text": "2.2.5 Exercises\n\nThere are 344 rows and 8 columns in the penguins data frame.\nThe bill_depth_mm denotes the bill depth in millimeters.\nThere is a positive, linear, and somewhat strong association between bill depth and bill length of penguins.\n\n\nggplot(\n  data = penguins, \n  aes(x = bill_depth_mm, y = bill_length_mm)\n) + \n  geom_point()\n#&gt; Warning: Removed 2 rows containing missing values (`geom_point()`).\n\n\n\n\n\nSpecies is a categorical variable and a scatterplot of a categorical variable is not that useful as it’s difficult to use it to describe the distribution of bill depth across species.\n\n\nggplot(\n  data = penguins, \n  aes(x = bill_depth_mm, y = species)\n) + \n  geom_point()\n#&gt; Warning: Removed 2 rows containing missing values (`geom_point()`).\n\n\n\n\n\nNo aesthetic mappings for x and y are provided and these are required aesthetics for the point geom.\n\n\nggplot(data = penguins) + \n  geom_point()\n#&gt; Error in `geom_point()`:\n#&gt; ! Problem while setting up geom.\n#&gt; ℹ Error occurred in the 1st layer.\n#&gt; Caused by error in `compute_geom_1()`:\n#&gt; ! `geom_point()` requires the following missing aesthetics: x and y\n\n\nSetting the na.rm argument to TRUE removes the missing values without a warning. The value for this argument is FALSE by default.\n\n\nggplot(\n  data = penguins, \n  aes(x = bill_depth_mm, y = bill_length_mm)\n) + \n  geom_point(na.rm = TRUE)\n\n\n\n\n\nThe plot from the previous exercise with caption added is provided below.\n\n\nggplot(\n  data = penguins,\n  aes(x = bill_depth_mm, y = bill_length_mm)\n) +\n  geom_point(na.rm = TRUE) +\n  labs(caption = \"Data come from the palmerpenguins package.\")\n\n\n\n\n\nThe code for recreating the visualization is provided below. The bill_depth_mm variable should be mapped at the local level, only for the point geom, as it is not used for the smooth geom – the points are colored for bill depth but the smooth line is a single color.\n\n\nggplot(\n  data = penguins,\n  aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point(aes(color = bill_depth_mm)) + \n  geom_smooth()\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#&gt; Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#&gt; Warning: Removed 2 rows containing missing values (`geom_point()`).\n\n\n\n\n\nI would expect the a scatterplot of body mass vs. flipper length with points and smooth lines for each species in a different color. The plot below indeed shows this.\n\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g, color = island)\n) +\n  geom_point() +\n  geom_smooth(se = FALSE)\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#&gt; Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#&gt; Warning: Removed 2 rows containing missing values (`geom_point()`).\n\n\n\n\n\nThe two plots will look the same as in the first plot the aesthetic mappings are at the global level and passed down to both geoms, and in the second plot both geoms have the same aesthetic mappings, each defined at the local level.\n\n\nggplot(\n  data = penguins,\n  mapping = aes(x = flipper_length_mm, y = body_mass_g)\n) +\n  geom_point() +\n  geom_smooth()\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#&gt; Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#&gt; Warning: Removed 2 rows containing missing values (`geom_point()`).\n\nggplot() +\n  geom_point(\n    data = penguins,\n    mapping = aes(x = flipper_length_mm, y = body_mass_g)\n  ) +\n  geom_smooth(\n    data = penguins,\n    mapping = aes(x = flipper_length_mm, y = body_mass_g)\n  )\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#&gt; Warning: Removed 2 rows containing non-finite values (`stat_smooth()`).\n#&gt; Removed 2 rows containing missing values (`geom_point()`)."
  },
  {
    "objectID": "data-visualize.html#exercises-1",
    "href": "data-visualize.html#exercises-1",
    "title": "2  Data visualization",
    "section": "2.4.3 Exercises",
    "text": "2.4.3 Exercises\n\nThis code makes the bars horizontal instead of vertical.\n\n\nggplot(penguins, aes(y = species)) + \n  geom_bar()\n\n\n\n\n\nIn the first plot, the borders of the bars are colored. In the second plot, the bars are filled in with colors. The fill aesthetic is more useful for changing the color of the bars.\n\n\nggplot(penguins, aes(x = species)) +\n  geom_bar(color = \"red\")\n\n\n\n\n\nggplot(penguins, aes(x = species)) +\n  geom_bar(fill = \"red\")\n\n\n\n\n\nIt determines the number of bins (bars) in a histogram.\nBelow are histograms with three different binwidths. I think a binwidth of 0.10 shows reveals the most interesting patterns.\n\n\nggplot(diamonds, aes(x = carat)) +\n  geom_histogram(binwidth = 0.01)\n\nggplot(diamonds, aes(x = carat)) +\n  geom_histogram(binwidth = 0.10)\n\nggplot(diamonds, aes(x = carat)) +\n  geom_histogram(binwidth = 1)"
  },
  {
    "objectID": "data-visualize.html#exercises-2",
    "href": "data-visualize.html#exercises-2",
    "title": "2  Data visualization",
    "section": "2.5.5 Exercises",
    "text": "2.5.5 Exercises\n\n\nmanufacturer, class, fl, drv, model, and trans are all categorical variables. displ, year, cyl, cty, and hwy are all numerical variables. You can run glimpse(mpg) or ?mpg to see a list of the variables.\nThe difference is a numerical variable doesn’t work with shape aesthetic but a categorical variable does. Also, the color scale is different for numerical and categorical variables.\n\n\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, color = cty)\n) + \n  geom_point()\n\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, size = cty)\n) + \n  geom_point()\n\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, size = cty, color = cty)\n) + \n  geom_point()\n\nggplot(\n  mpg, \n  aes(x = hwy, y = displ, size = cty, color = cty, shape = drv)\n) + \n  geom_point()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSince there is no line to alter the width of, nothing happens. The code runs as though that aesthetic was not specified.\n\n\nggplot(mpg, aes(x = hwy, y = displ, linewidth = cty)) + \n  geom_point()\n\n\n\n\n\nSee below for a sample plot that maps hwy to x, yy, and color aesthetics. ggplot2 will allow you to map the same variable to multiple aesthetics, but the resulting plot is not useful.\n\n\nggplot(mpg, aes(x = hwy, y = hwy, color = hwy)) + \n  geom_point()\n\n\n\n\n\nAdelies tend to have higher bill depth while Gentoo have longer bills and Chinstrap have deeper and longer bills.\n\n\nggplot(\n  penguins,\n  aes(x = bill_depth_mm, y = bill_length_mm, color = species)\n) + \n  geom_point()\n#&gt; Warning: Removed 2 rows containing missing values (`geom_point()`).\n\n\n\n\n\nThe code provided in the exercise yields two separate legends because the legend for color is renamed to \"Species\" but the legend for shape is not, and is named \"species\" by default instead. To fix it, we would need to explicitly rename the shape legend as well.\n\n\nggplot(\n  data = penguins,\n  mapping = aes(\n    x = bill_length_mm, y = bill_depth_mm, \n    color = species, shape = species\n  )\n) +\n  geom_point() +\nlabs(\n  color = \"Species\",\n  shape = \"Species\"\n)\n#&gt; Warning: Removed 2 rows containing missing values (`geom_point()`)."
  },
  {
    "objectID": "data-visualize.html#exercises-3",
    "href": "data-visualize.html#exercises-3",
    "title": "2  Data visualization",
    "section": "2.6.1 Exercises",
    "text": "2.6.1 Exercises\n\nThe second plot is saved, because ggsave() saves the last plot you made.\n\n\nggplot(mpg, aes(x = class)) +\n  geom_bar()\n\nggplot(mpg, aes(x = cty, y = hwy)) +\n  geom_point()\n\nggsave(\"mpg-plot.png\")\n#&gt; Saving 6 x 4 in image\n\n\n\n\n\n\n\n\nYou need to change the suffix of the file from png to pdf in the ggsave() call."
  },
  {
    "objectID": "workflow-basics.html#prerequisites",
    "href": "workflow-basics.html#prerequisites",
    "title": "\n3  Workflow: basics\n",
    "section": "Prerequisites",
    "text": "Prerequisites\n\nlibrary(tidyverse)\n#&gt; ── Attaching core tidyverse packages ───────────────────── tidyverse 2.0.0 ──\n#&gt; ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#&gt; ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#&gt; ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#&gt; ✔ purrr     1.0.1     \n#&gt; ── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──\n#&gt; ✖ dplyr::filter() masks stats::filter()\n#&gt; ✖ dplyr::lag()    masks stats::lag()\n#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors"
  },
  {
    "objectID": "workflow-basics.html#exercises",
    "href": "workflow-basics.html#exercises",
    "title": "\n3  Workflow: basics\n",
    "section": "3.5 Exercises",
    "text": "3.5 Exercises\n\nThe variable is called my_variable while the next line calls it my_varıable, with an an ı (i without a dot) in the variable name. Therefore the error is due to the mismatch in variable names.\nThe corrected code is provided below.\n\n\nlibrary(tidyverse)\n\nggplot(mpg, aes(x = displ, y = hwy)) + \n  geom_point() +\n  geom_smooth(method = \"lm\")\n#&gt; `geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\nOption + Shift + K / Alt + Shift + K pulls up keyboard shortcuts. Alternatively, you can get to the same place with Help &gt; Keyboard Shortcuts Help.\nThe my_bar_plot object is saved because that’s what was specified in the plot argument of the ggsave() call.\n\n\nmy_bar_plot &lt;- ggplot(mpg, aes(x = class)) +\n  geom_bar()\n\nmy_scatter_plot &lt;- ggplot(mpg, aes(x = cty, y = hwy)) +\n  geom_point()\n\nggsave(filename = \"mpg-plot.png\", plot = my_bar_plot)\n#&gt; Saving 6 x 4 in image"
  },
  {
    "objectID": "data-transform.html#prerequisites",
    "href": "data-transform.html#prerequisites",
    "title": "\n4  Data transformation\n",
    "section": "Prerequisites",
    "text": "Prerequisites\n\nlibrary(nycflights13)\nlibrary(tidyverse)\n#&gt; ── Attaching core tidyverse packages ───────────────────── tidyverse 2.0.0 ──\n#&gt; ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#&gt; ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#&gt; ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#&gt; ✔ purrr     1.0.1     \n#&gt; ── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──\n#&gt; ✖ dplyr::filter() masks stats::filter()\n#&gt; ✖ dplyr::lag()    masks stats::lag()\n#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors"
  },
  {
    "objectID": "data-transform.html#exercises",
    "href": "data-transform.html#exercises",
    "title": "\n4  Data transformation\n",
    "section": "4.2.5 Exercises",
    "text": "4.2.5 Exercises\n\nPipelines for each part are given below.\n\n\n\n\n\nflights |&gt;\n  filter(arr_delay &gt;= 120) |&gt;\n  arrange(desc(arr_delay))\n#&gt; # A tibble: 10,200 × 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     9      641            900      1301     1242           1530\n#&gt; 2  2013     6    15     1432           1935      1137     1607           2120\n#&gt; 3  2013     1    10     1121           1635      1126     1239           1810\n#&gt; 4  2013     9    20     1139           1845      1014     1457           2210\n#&gt; 5  2013     7    22      845           1600      1005     1044           1815\n#&gt; 6  2013     4    10     1100           1900       960     1342           2211\n#&gt; # ℹ 10,194 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\n\n\n\n\nflights |&gt;\n  filter(dest %in% c(\"IAH\", \"HOU\"))\n#&gt; # A tibble: 9,313 × 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      623            627        -4      933            932\n#&gt; 4  2013     1     1      728            732        -4     1041           1038\n#&gt; 5  2013     1     1      739            739         0     1104           1038\n#&gt; 6  2013     1     1      908            908         0     1228           1219\n#&gt; # ℹ 9,307 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\n\n\n\n\nflights |&gt;\n  filter(carrier %in% c(\"UA\", \"DL\", \"AA\"))\n#&gt; # A tibble: 139,504 × 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1      517            515         2      830            819\n#&gt; 2  2013     1     1      533            529         4      850            830\n#&gt; 3  2013     1     1      542            540         2      923            850\n#&gt; 4  2013     1     1      554            600        -6      812            837\n#&gt; 5  2013     1     1      554            558        -4      740            728\n#&gt; 6  2013     1     1      558            600        -2      753            745\n#&gt; # ℹ 139,498 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\n\n\n\n\nflights |&gt;\n  filter(month %in% c(7, 8, 9))\n#&gt; # A tibble: 86,326 × 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     7     1        1           2029       212      236           2359\n#&gt; 2  2013     7     1        2           2359         3      344            344\n#&gt; 3  2013     7     1       29           2245       104      151              1\n#&gt; 4  2013     7     1       43           2130       193      322             14\n#&gt; 5  2013     7     1       44           2150       174      300            100\n#&gt; 6  2013     7     1       46           2051       235      304           2358\n#&gt; # ℹ 86,320 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\n\n\n\n\nflights |&gt; \n  filter(arr_delay &gt;= 120 & dep_delay &lt;= 0) |&gt; view()\n\n\n\n\n\nflights |&gt; \n  filter(dep_delay &gt;= 60 & dep_delay - arr_delay &gt; 30)\n#&gt; # A tibble: 1,844 × 19\n#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1  2013     1     1     2205           1720       285       46           2040\n#&gt; 2  2013     1     1     2326           2130       116      131             18\n#&gt; 3  2013     1     3     1503           1221       162     1803           1555\n#&gt; 4  2013     1     3     1839           1700        99     2056           1950\n#&gt; 5  2013     1     3     1850           1745        65     2148           2120\n#&gt; 6  2013     1     3     1941           1759       102     2246           2139\n#&gt; # ℹ 1,838 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\n\nFlights with longest departure delays and, among those, flights that left earliest in the morning:\n\n\nflights |&gt; \n  arrange(desc(dep_delay)) |&gt; \n  arrange(sched_dep_time) |&gt;\n  relocate(dep_delay, sched_dep_time)\n#&gt; # A tibble: 336,776 × 19\n#&gt;   dep_delay sched_dep_time  year month   day dep_time arr_time sched_arr_time\n#&gt;       &lt;dbl&gt;          &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1        NA            106  2013     7    27       NA       NA            245\n#&gt; 2       188            500  2013     4    24      808     1008            640\n#&gt; 3        61            500  2013     9    13      601      732            648\n#&gt; 4        47            500  2013     3     9      547      733            648\n#&gt; 5        44            500  2013     6     8      544      727            640\n#&gt; 6        29            500  2013     4    17      529      704            640\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\n\nFastest flights, measured as miles per hour:\n\n\nflights |&gt; \n  mutate(speed = distance / (air_time / 60)) |&gt;\n  arrange(desc(speed)) |&gt;\n  relocate(speed)\n#&gt; # A tibble: 336,776 × 20\n#&gt;   speed  year month   day dep_time sched_dep_time dep_delay arr_time\n#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1  703.  2013     5    25     1709           1700         9     1923\n#&gt; 2  650.  2013     7     2     1558           1513        45     1745\n#&gt; 3  648   2013     5    13     2040           2025        15     2225\n#&gt; 4  641.  2013     3    23     1914           1910         4     2045\n#&gt; 5  591.  2013     1    12     1559           1600        -1     1849\n#&gt; 6  564   2013    11    17      650            655        -5     1059\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, …\n\n\nYes, there was a flight on every day of 2013 since there are 365 distinct combinations of year, month, and day, which is equal to the number of days in the year 2013.\n\n\nflights |&gt; \n  distinct(year, month, day) |&gt;\n  nrow()\n#&gt; [1] 365\n\n\nFlights that traveled the farthest distance:\n\n\nflights |&gt; \n  arrange(desc(distance)) |&gt;\n  relocate(distance)\n#&gt; # A tibble: 336,776 × 19\n#&gt;   distance  year month   day dep_time sched_dep_time dep_delay arr_time\n#&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1     4983  2013     1     1      857            900        -3     1516\n#&gt; 2     4983  2013     1     2      909            900         9     1525\n#&gt; 3     4983  2013     1     3      914            900        14     1504\n#&gt; 4     4983  2013     1     4      900            900         0     1516\n#&gt; 5     4983  2013     1     5      858            900        -2     1519\n#&gt; 6     4983  2013     1     6     1019            900        79     1558\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, …\n\nFlights that travelled the shortest distance\n\nflights |&gt; \n  arrange(distance) |&gt;\n  relocate(distance)\n#&gt; # A tibble: 336,776 × 19\n#&gt;   distance  year month   day dep_time sched_dep_time dep_delay arr_time\n#&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1       17  2013     7    27       NA            106        NA       NA\n#&gt; 2       80  2013     1     3     2127           2129        -2     2222\n#&gt; 3       80  2013     1     4     1240           1200        40     1333\n#&gt; 4       80  2013     1     4     1829           1615       134     1937\n#&gt; 5       80  2013     1     4     2128           2129        -1     2218\n#&gt; 6       80  2013     1     5     1155           1200        -5     1241\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, …\n\n\nThe order doesn’t matter because we filter based on a condition, not based on row number."
  },
  {
    "objectID": "data-transform.html#exercises-1",
    "href": "data-transform.html#exercises-1",
    "title": "\n4  Data transformation\n",
    "section": "4.3.5 Exercises",
    "text": "4.3.5 Exercises\n\nI would expect dep_time to be sched_dep_time + dep_delay.\n\n\nflights |&gt; \n  relocate(dep_time, sched_dep_time, dep_delay)\n#&gt; # A tibble: 336,776 × 19\n#&gt;   dep_time sched_dep_time dep_delay  year month   day arr_time sched_arr_time\n#&gt;      &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1      517            515         2  2013     1     1      830            819\n#&gt; 2      533            529         4  2013     1     1      850            830\n#&gt; 3      542            540         2  2013     1     1      923            850\n#&gt; 4      544            545        -1  2013     1     1     1004           1022\n#&gt; 5      554            600        -6  2013     1     1      812            837\n#&gt; 6      554            558        -4  2013     1     1      740            728\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\n\nThe following are some of the ways these variables can be selected.\n\n\nflights |&gt; \n  select(dep_time, dep_delay, arr_time, arr_delay)\n#&gt; # A tibble: 336,776 × 4\n#&gt;   dep_time dep_delay arr_time arr_delay\n#&gt;      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;\n#&gt; 1      517         2      830        11\n#&gt; 2      533         4      850        20\n#&gt; 3      542         2      923        33\n#&gt; 4      544        -1     1004       -18\n#&gt; 5      554        -6      812       -25\n#&gt; 6      554        -4      740        12\n#&gt; # ℹ 336,770 more rows\n\nflights |&gt; \n  select(starts_with(\"dep\"), starts_with(\"arr\"))\n#&gt; # A tibble: 336,776 × 4\n#&gt;   dep_time dep_delay arr_time arr_delay\n#&gt;      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;\n#&gt; 1      517         2      830        11\n#&gt; 2      533         4      850        20\n#&gt; 3      542         2      923        33\n#&gt; 4      544        -1     1004       -18\n#&gt; 5      554        -6      812       -25\n#&gt; 6      554        -4      740        12\n#&gt; # ℹ 336,770 more rows\n\nflights |&gt;\n  select(dep_time:arr_delay, -contains(\"sched\"))\n#&gt; # A tibble: 336,776 × 4\n#&gt;   dep_time dep_delay arr_time arr_delay\n#&gt;      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;\n#&gt; 1      517         2      830        11\n#&gt; 2      533         4      850        20\n#&gt; 3      542         2      923        33\n#&gt; 4      544        -1     1004       -18\n#&gt; 5      554        -6      812       -25\n#&gt; 6      554        -4      740        12\n#&gt; # ℹ 336,770 more rows\n\n\nYou get the variable just once.\n\n\nflights |&gt; \n  select(dep_time, dep_time)\n#&gt; # A tibble: 336,776 × 1\n#&gt;   dep_time\n#&gt;      &lt;int&gt;\n#&gt; 1      517\n#&gt; 2      533\n#&gt; 3      542\n#&gt; 4      544\n#&gt; 5      554\n#&gt; 6      554\n#&gt; # ℹ 336,770 more rows\n\n\nYou ask if any_of() these variables have a certain thing you are looking for.\n\n\nvariables &lt;- c(\"year\", \"month\", \"day\", \"dep_delay\", \"arr_delay\")\n\nflights |&gt; \n  select(any_of(variables))\n#&gt; # A tibble: 336,776 × 5\n#&gt;    year month   day dep_delay arr_delay\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n#&gt; 1  2013     1     1         2        11\n#&gt; 2  2013     1     1         4        20\n#&gt; 3  2013     1     1         2        33\n#&gt; 4  2013     1     1        -1       -18\n#&gt; 5  2013     1     1        -6       -25\n#&gt; 6  2013     1     1        -4        12\n#&gt; # ℹ 336,770 more rows\n\n\nYes, it does surprise me since the variable names are lowercase but the string in contains() is uppercase. By default, contains() ignores case.\n\n\nflights |&gt; \n  select(contains(\"TIME\"))\n#&gt; # A tibble: 336,776 × 6\n#&gt;   dep_time sched_dep_time arr_time sched_arr_time air_time\n#&gt;      &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;\n#&gt; 1      517            515      830            819      227\n#&gt; 2      533            529      850            830      227\n#&gt; 3      542            540      923            850      160\n#&gt; 4      544            545     1004           1022      183\n#&gt; 5      554            600      812            837      116\n#&gt; 6      554            558      740            728      150\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 1 more variable: time_hour &lt;dttm&gt;\n\nTo change this default behavior, set ignore.case = FALSE.\n\nflights |&gt; \n  select(contains(\"TIME\", ignore.case = FALSE))\n#&gt; # A tibble: 336,776 × 0\n\n\nBelow we rename air_time to air_time_min and move it to the beginning of the data frame.\n\n\nflights |&gt;\n  rename(air_time_min = air_time) |&gt;\n  relocate(air_time_min)\n#&gt; # A tibble: 336,776 × 19\n#&gt;   air_time_min  year month   day dep_time sched_dep_time dep_delay arr_time\n#&gt;          &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n#&gt; 1          227  2013     1     1      517            515         2      830\n#&gt; 2          227  2013     1     1      533            529         4      850\n#&gt; 3          160  2013     1     1      542            540         2      923\n#&gt; 4          183  2013     1     1      544            545        -1     1004\n#&gt; 5          116  2013     1     1      554            600        -6      812\n#&gt; 6          150  2013     1     1      554            558        -4      740\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, …\n\n\nThis doesn’t work because the result of the select() step is a data frame with only the tailnum variable, so it’s not possible to arrange it by another variable, arr_delay.\n\n\nflights |&gt; \n  select(tailnum) |&gt; \n  arrange(arr_delay)\n#&gt; Error in `arrange()`:\n#&gt; ℹ In argument: `..1 = arr_delay`.\n#&gt; Caused by error:\n#&gt; ! object 'arr_delay' not found"
  },
  {
    "objectID": "data-transform.html#exercises-2",
    "href": "data-transform.html#exercises-2",
    "title": "\n4  Data transformation\n",
    "section": "4.5.7 Exercises",
    "text": "4.5.7 Exercises\n\nF9 (Frontier Airlines) has the worst average delays.\n\n\nflights |&gt;\n  group_by(carrier) |&gt;\n  summarize(avg_dep_delay = mean(dep_delay, na.rm = TRUE)) |&gt;\n  arrange(desc(avg_dep_delay))\n#&gt; # A tibble: 16 × 2\n#&gt;   carrier avg_dep_delay\n#&gt;   &lt;chr&gt;           &lt;dbl&gt;\n#&gt; 1 F9               20.2\n#&gt; 2 EV               20.0\n#&gt; 3 YV               19.0\n#&gt; 4 FL               18.7\n#&gt; 5 WN               17.7\n#&gt; 6 9E               16.7\n#&gt; # ℹ 10 more rows\n\n\nThe following are the top 5 most departure delayed flights from each destination.\n\n\nflights |&gt; \n  group_by(dest) |&gt; \n  arrange(dest, desc(dep_delay)) |&gt;\n  slice_head(n = 5) |&gt;\n  relocate(dest, dep_delay)\n#&gt; # A tibble: 517 × 19\n#&gt; # Groups:   dest [105]\n#&gt;   dest  dep_delay  year month   day dep_time sched_dep_time arr_time\n#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;int&gt;\n#&gt; 1 ABQ         142  2013    12    14     2223           2001      133\n#&gt; 2 ABQ         139  2013    12    17     2220           2001      120\n#&gt; 3 ABQ         125  2013     7    30     2212           2007       57\n#&gt; 4 ABQ         125  2013     9     2     2212           2007       48\n#&gt; 5 ABQ         119  2013     7    23     2206           2007      116\n#&gt; 6 ACK         219  2013     7    23     1139            800     1250\n#&gt; # ℹ 511 more rows\n#&gt; # ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, …\n\n\nOver the course of the day, hourly average departure delay increases until about 7pm, and then declines again, however doesn’t go as low as the beginning of the day.\n\n\nflights |&gt;\n  group_by(hour) |&gt;\n  summarize(avg_dep_delay = mean(dep_delay, na.rm = TRUE)) |&gt;\n  ggplot(aes(x = hour, y = avg_dep_delay)) + \n  geom_smooth()\n#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n#&gt; Warning: Removed 1 rows containing non-finite values (`stat_smooth()`).\n\n\n\n\n\nSupplying a negative value arranges the data frame in either ascending (with slice_min()) or descending (with slice_max()) order, but it doesn’t actually slice the data frame for the lowest/highest values of the given variable.\n\n\nflights |&gt; \n  slice_min(dep_delay, n = -5) |&gt;\n  relocate(dep_delay)\n#&gt; # A tibble: 336,776 × 19\n#&gt;   dep_delay  year month   day dep_time sched_dep_time arr_time sched_arr_time\n#&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1       -43  2013    12     7     2040           2123       40           2352\n#&gt; 2       -33  2013     2     3     2022           2055     2240           2338\n#&gt; 3       -32  2013    11    10     1408           1440     1549           1559\n#&gt; 4       -30  2013     1    11     1900           1930     2233           2243\n#&gt; 5       -27  2013     1    29     1703           1730     1947           1957\n#&gt; 6       -26  2013     8     9      729            755     1002            955\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\nflights |&gt; \n  slice_min(dep_delay, n = 5) |&gt;\n  relocate(dep_delay)\n#&gt; # A tibble: 5 × 19\n#&gt;   dep_delay  year month   day dep_time sched_dep_time arr_time sched_arr_time\n#&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1       -43  2013    12     7     2040           2123       40           2352\n#&gt; 2       -33  2013     2     3     2022           2055     2240           2338\n#&gt; 3       -32  2013    11    10     1408           1440     1549           1559\n#&gt; 4       -30  2013     1    11     1900           1930     2233           2243\n#&gt; 5       -27  2013     1    29     1703           1730     1947           1957\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#&gt; #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, …\n\nflights |&gt; \n  slice_max(dep_delay, n = -5) |&gt;\n  relocate(dep_delay)\n#&gt; # A tibble: 336,776 × 19\n#&gt;   dep_delay  year month   day dep_time sched_dep_time arr_time sched_arr_time\n#&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1      1301  2013     1     9      641            900     1242           1530\n#&gt; 2      1137  2013     6    15     1432           1935     1607           2120\n#&gt; 3      1126  2013     1    10     1121           1635     1239           1810\n#&gt; 4      1014  2013     9    20     1139           1845     1457           2210\n#&gt; 5      1005  2013     7    22      845           1600     1044           1815\n#&gt; 6       960  2013     4    10     1100           1900     1342           2211\n#&gt; # ℹ 336,770 more rows\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …\n\nflights |&gt; \n  slice_max(dep_delay, n = 5) |&gt;\n  relocate(dep_delay)\n#&gt; # A tibble: 5 × 19\n#&gt;   dep_delay  year month   day dep_time sched_dep_time arr_time sched_arr_time\n#&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;\n#&gt; 1      1301  2013     1     9      641            900     1242           1530\n#&gt; 2      1137  2013     6    15     1432           1935     1607           2120\n#&gt; 3      1126  2013     1    10     1121           1635     1239           1810\n#&gt; 4      1014  2013     9    20     1139           1845     1457           2210\n#&gt; 5      1005  2013     7    22      845           1600     1044           1815\n#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#&gt; #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, …\n\n\ncount() counts the number of observations in each group, setting the sort argument to TRUE arranges the categories in descending order of number of observations.\nFirst, let’s define the data frame df.\n\n\ndf &lt;- tibble(\n  x = 1:5,\n  y = c(\"a\", \"b\", \"a\", \"a\", \"b\"),\n  z = c(\"K\", \"K\", \"L\", \"L\", \"K\")\n)\n\n\nThe following groups df by y.\n\n\ndf |&gt;\n  group_by(y)\n#&gt; # A tibble: 5 × 3\n#&gt; # Groups:   y [2]\n#&gt;       x y     z    \n#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1     1 a     K    \n#&gt; 2     2 b     K    \n#&gt; 3     3 a     L    \n#&gt; 4     4 a     L    \n#&gt; 5     5 b     K\n\n\nThe following arranges df in ascending order of the value of y.\n\n\ndf |&gt;\n  arrange(y)\n#&gt; # A tibble: 5 × 3\n#&gt;       x y     z    \n#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;\n#&gt; 1     1 a     K    \n#&gt; 2     3 a     L    \n#&gt; 3     4 a     L    \n#&gt; 4     2 b     K    \n#&gt; 5     5 b     K\n\n\nThe following groups df by y and then calculates the average value of x for each group.\n\n\ndf |&gt;\n  group_by(y) |&gt;\n  summarize(mean_x = mean(x))\n#&gt; # A tibble: 2 × 2\n#&gt;   y     mean_x\n#&gt;   &lt;chr&gt;  &lt;dbl&gt;\n#&gt; 1 a       2.67\n#&gt; 2 b       3.5\n\n\nThe following groups df by y and z, and then calculates the average value of x for each group combination. The resulting data frame is grouped by y.\n\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  summarize(mean_x = mean(x))\n#&gt; `summarise()` has grouped output by 'y'. You can override using the\n#&gt; `.groups` argument.\n#&gt; # A tibble: 3 × 3\n#&gt; # Groups:   y [2]\n#&gt;   y     z     mean_x\n#&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;\n#&gt; 1 a     K        1  \n#&gt; 2 a     L        3.5\n#&gt; 3 b     K        3.5\n\n\nThe following groups df by y and z, and then calculates the average value of x for each group combination. The resulting data frame is not grouped.\n\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  summarize(mean_x = mean(x), .groups = \"drop\")\n#&gt; # A tibble: 3 × 3\n#&gt;   y     z     mean_x\n#&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;\n#&gt; 1 a     K        1  \n#&gt; 2 a     L        3.5\n#&gt; 3 b     K        3.5\n\n\nEach of the following groups df by y and z, and then calculates the average value of x for each group combination. With summarize() the resulting data frame has one row per group combination while with mutate() the resulting data frame has the same number of rows as the original data frame.\n\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  summarize(mean_x = mean(x))\n#&gt; `summarise()` has grouped output by 'y'. You can override using the\n#&gt; `.groups` argument.\n#&gt; # A tibble: 3 × 3\n#&gt; # Groups:   y [2]\n#&gt;   y     z     mean_x\n#&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;\n#&gt; 1 a     K        1  \n#&gt; 2 a     L        3.5\n#&gt; 3 b     K        3.5\n\ndf |&gt;\n  group_by(y, z) |&gt;\n  mutate(mean_x = mean(x))\n#&gt; # A tibble: 5 × 4\n#&gt; # Groups:   y, z [3]\n#&gt;       x y     z     mean_x\n#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;\n#&gt; 1     1 a     K        1  \n#&gt; 2     2 b     K        3.5\n#&gt; 3     3 a     L        3.5\n#&gt; 4     4 a     L        3.5\n#&gt; 5     5 b     K        3.5"
  },
  {
    "objectID": "workflow-style.html#prerequisites",
    "href": "workflow-style.html#prerequisites",
    "title": "\n5  Workflow: code style\n",
    "section": "Prerequisites",
    "text": "Prerequisites\n\nlibrary(tidyverse)\n#&gt; ── Attaching core tidyverse packages ───────────────────── tidyverse 2.0.0 ──\n#&gt; ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#&gt; ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#&gt; ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#&gt; ✔ purrr     1.0.1     \n#&gt; ── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──\n#&gt; ✖ dplyr::filter() masks stats::filter()\n#&gt; ✖ dplyr::lag()    masks stats::lag()\n#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\nlibrary(nycflights13)"
  },
  {
    "objectID": "workflow-style.html#exercises-5.6",
    "href": "workflow-style.html#exercises-5.6",
    "title": "\n5  Workflow: code style\n",
    "section": "\n5.1 Exercises 5.6",
    "text": "5.1 Exercises 5.6\n\nRestyled pipelines are given below\n\n\nflights |&gt;\n  filter(dest == \"IAH\") |&gt;\n  group_by(year, month, day) |&gt;\n  summarize(\n    n = n(),\n    delay = mean(arr_delay, na.rm = TRUE)\n  ) |&gt;\n  filter(n &gt; 10)\n#&gt; `summarise()` has grouped output by 'year', 'month'. You can override using\n#&gt; the `.groups` argument.\n#&gt; # A tibble: 365 × 5\n#&gt; # Groups:   year, month [12]\n#&gt;    year month   day     n delay\n#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;\n#&gt; 1  2013     1     1    20 17.8 \n#&gt; 2  2013     1     2    20  7   \n#&gt; 3  2013     1     3    19 18.3 \n#&gt; 4  2013     1     4    20 -3.2 \n#&gt; 5  2013     1     5    13 20.2 \n#&gt; 6  2013     1     6    18  9.28\n#&gt; # ℹ 359 more rows\n\n\nflights |&gt;\n  filter(\n    carrier == \"UA\", \n    dest %in% c(\"IAH\", \"HOU\"), \n    sched_dep_time &gt; 0900, \n    sched_arr_time &lt; 2000\n  ) |&gt;\n  group_by(flight) |&gt;\n  summarize(\n    delay = mean(arr_delay, na.rm = TRUE), \n    cancelled = sum(is.na(arr_delay)), n = n()\n  ) |&gt;\n  filter(n &gt; 10)\n#&gt; # A tibble: 74 × 4\n#&gt;   flight delay cancelled     n\n#&gt;    &lt;int&gt; &lt;dbl&gt;     &lt;int&gt; &lt;int&gt;\n#&gt; 1     53 12.5          2    18\n#&gt; 2    112 14.1          0    14\n#&gt; 3    205 -1.71         0    14\n#&gt; 4    235 -5.36         0    14\n#&gt; 5    255 -9.47         0    15\n#&gt; 6    268 38.6          1    15\n#&gt; # ℹ 68 more rows"
  },
  {
    "objectID": "workflow-scripts.html#exercises",
    "href": "workflow-scripts.html#exercises",
    "title": "6  Workflow: scripts and projects",
    "section": "7.3 Exercises",
    "text": "7.3 Exercises\n\nIf you go to Tools &gt; Global Options &gt; Appearance you can change the theme of your RStudio.\nRStudio will warn with a caution icon (orange triangle with an exclamation point in it) if variable used in your code is not defined in your scope (i.e., your environment)."
  },
  {
    "objectID": "workflow-help.html",
    "href": "workflow-help.html",
    "title": "7  Workflow: getting help",
    "section": "",
    "text": "There are no exercises in this chapter."
  }
]